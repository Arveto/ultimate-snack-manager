let connectionData={login:void 0,hash:void 0},currentUser={};function login(a,b){$("#loginNav").addClass("is-loading");let c=new jsSHA("SHA-512","TEXT");c.update(b),connectionData.login=a,connectionData.hash=c.getHash("HEX"),socket.emit("login",{email:a,password:connectionData.hash})}socket.on("login",a=>{if(a.ok){if(notif("success","Connect\xE9 en tant que <b>"+a.userData.fiName+" "+a.userData.faName+"</b>"),currentUser=a.userData,products=a.itemsList,$("#ownSold").html("Mon solde: "+a.userData.balance.toFixed(2).toString()+"\u20AC"),a.isAdmin||a.isSuperAdmin){currentUser.admin=!0;for(let b=0;b<a.preorders.length;b++)addPreorder(a.preorders[b]);notif("success","You are <b>ADMIN</b>"),$(".admin").css("display","flex").css("visibility","visible"),$(".moldu").hide().css("visibility","collapse");let b=$("#userSelectionOrder"),c=$("#userSelectionEdit");a.users.forEach(a=>{insertUserOrder(b,a),insertUserAdmin(c,a),bindUserOrder(a),bindUserAdmin()}),createAdminDashboard(a),$("#preordersContainer").show(),users=a.users,users.forEach(a=>{a.name=a.fiName+"  \""+a.pseudo+"\" "+a.faName})}else createStandardGraph(a.graphData,products),currentUser.admin=!1,$("#productsNav").hide,$("#main-graph").after("            <div class=\"admin tile is-5\" style =\"display: flex; visibility: visible;\">                <div class=\"tile is-parent is-vertical\">                    <div class=\"tile is-child box\">                        <p class=\"tile-title\" size=\"1\">Mon solde</p>                        <p class=\"subtitle\">"+currentUser.balance+"\u20AC</p>                    </div>                    <div class=\"tile is-child box\">                        <p class=\"tile-title\" size=\"1\">Merci de votre visite!</p>                        <p class=\"subtitle\">Pour toute aide, addressez-vous \xE0 un cafetier ou envoyez-nous un mail \xE0 <a href=\"mailto:arveto.softwares@gmail.com\">cette adresse</a>.</p>                    </div>                </div>            </div>");a.isSuperAdmin||$("#productsNav").hide(),a.isAdmin||a.isSuperAdmin||$("#toAdminUsers").hide(),logged=!0,changeView("dashboard"),currentUser.admin&&$("#preordersContainer").show(),$(".login").val(""),$("#loginNav").html("Connect\xE9: <b> &nbsp; "+currentUser.fiName+" "+currentUser.faName+"</b>"),$("#loginPopup").hide()}else notif("danger","Informations incorrectes =/");$("#loginNav").removeClass("is-loading"),$(".password").val(""),a.isSuperAdmin&&$(".superadmin").show().css("display","block").css("visibility","visible")}),$("#submitLogin").on("click",()=>{let a=$("#loginAdmin").val(),b=$("#password").val();login(a,b)}),$("#submitLoginPopup").on("click",()=>{let a=$("#emailPopup").val(),b=$("#passwordPopup").val();login(a,b)}),$(".password").on("keypress",a=>{let b=a.keyCode||a.which;if(13==b){$("#loginNav").addClass("is-loading");let a=$("login"==currentView?"#loginAdmin":"#loginPopup").val(),b=$("login"==currentView?"#password":"#passwordPopup").val();login(a,b)}}),$("#emailPopup").on("keypress",a=>{let b=a.keyCode||a.which;9==b&&(a.preventDefault(),$("#loginNav").trigger("click"),$("#passwordPopup").focus())}),$("#toSignUp").on("click",()=>{changeView("signup")});