"use strict";function fillEditForm(b){$("#editFaName").val(b.faName),$("#editFiName").val(b.fiName),$("#editPseudo").val(b.pseudo),$("#editEmail").val(b.email)}function accountEdit(b){sendedPassword="",""!=$("#editPassword1").val()&&(sendedPassword=b.password1),socket.emit("editAccount",{faName:b.faName,fiName:b.fiName,pseudo:b.pseudo,email:b.email,password:sendedPassword,id:currentUser.id})}socket.on("editSuccess",function(){notif("success","Votre compte a bien \xE9t\xE9 \xE9dit\xE9!"),$("#editPassword1").val(""),$("#editPassword2").val("")}),socket.on("editFailure",function(){notif("danger","Addresse email d\xE9j\xE0 utilis\xE9e")});function hash(c){var a=new jsSHA("SHA-512","TEXT");return a.update(c),a.getHash("HEX")}$("#submitEdit").on("click",function(){var a=$("#emailEdit"),e=$("#password2");a.removeClass("is-danger"),$("#emailError").remove(),e.removeClass("is-danger"),$("#passwordError").remove();var f={faName:$("#editFaName").val(),fiName:$("#editFiName").val(),pseudo:$("#editPseudo").val(),email:$("#editEmail").val(),password1:$("#editPassword1").val(),password2:$("#editPassword2").val()},b=!0;for(key in f)""==f[key]&&"pseudo"!=key&&"password1"!=key&&"password2"!=key&&(b=!1);f.password1=hash(f.password1),f.password2=hash(f.password2);var g=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;b&&g.test(f.email)&&f.password1==f.password2&&accountEdit(f),g.test(f.email)||notif("danger","Email au mauvais format"),f.password1!=f.password2&&notif("danger","Mots de passes non identiques"),g.test(f.email)||(a.addClass("is-danger"),a.after("<p class=\"help is-danger\" id=\"emailError\">Addresse invalide ;(</p>")),f.password1!=f.password2&&(e.addClass("is-danger"),e.after("<p class=\"help is-danger\" id=\"passwordError\">Mots de passe non identiques ;(</p>"))});